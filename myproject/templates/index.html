{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ASCReM — Login & Register</title>
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/ASCReM_Logo.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/ASCReM_Logo.png' %}">
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/ASCReM_Logo.png' %}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'images/css/index.css' %}">
</head>

<body>
<div class="auth-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-content">
      <div class="logo-section">
        <img src="{% static 'images/ASCReM_Logo.png' %}" alt="ASCReM Logo">
        <h1>Automated Student Class Record Monitoring Web Application</h1>
        <div class="subtitle">(ASCReM)</div>
      </div>
      <div class="features-section">
        <h2>Key Features</h2>
        <ul>
          <li>Automated Attendance Tracking</li>
          <li>Easy Score Input & Grade Computation</li>
          <li>Real-Time Class Monitoring</li>
          <li>Instant Report Generation</li>
          <li>Secure Faculty Login & Data Protection</li>
        </ul>
      </div>
    </div>
    <div class="sidebar-footer">
      <p>© 2025 ASCReM. All rights reserved.</p>
    </div>
  </div>

  <!-- Right Panel -->
  <div class="right-panel">
    <div class="tab-btns">
      <button id="loginTab">Login</button>
      <button id="registerTab">Register</button>
    </div>

    <div class="form-content">
      <!-- Login Form -->
      <div id="loginForm" class="fade">
        <div class="form-header">
          <h3>Welcome Back</h3>
          <!-- <p>Automated Student Class Record Monitoring Web Application</p> -->
          <p>Sign in to access your account</p>

        </div>
        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-info">{{ message }}</div>
          {% endfor %}
        {% endif %}
        <form method="post" action="{% url 'index' %}">
          {% csrf_token %}
          <div class="input-group">
            <span><i class="bi bi-person-fill"></i></span>
            <input type="text" name="username" placeholder="Instructor ID" required>
          </div>
          <div class="input-group">
            <span><i class="bi bi-lock-fill"></i></span>
            <input type="password" name="password" placeholder="Password" required>
          </div>
          <div class="form-options">
            <div class="remember-me">
              <input type="checkbox" name="remember" id="remember">
              <label for="remember">Remember Me</label>
            </div>
            <a href="#" class="forgot-password">Forgot Password?</a>
          </div>
          <button type="submit" name="login_submit" class="btn-accent">Login</button>
        </form>
      </div>

      <!-- Register Form -->
      <div id="registerForm" class="fade">
        <div class="form-header">
          <h3>Create Account</h3>
          <p>Join ASCReM to get started</p>
        </div>
        {% if register_form.errors %}
          <div class="alert alert-danger">
            <ul>
              {% for field, errors in register_form.errors.items %}
                {% for error in errors %}
                  <li>{{ error }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
          </div>
        {% endif %}
        <form method="post" action="{% url 'index' %}">
          {% csrf_token %}
          <div class="input-group">
            <span><i class="bi bi-person-fill"></i></span>
            <input type="text" name="username" placeholder="Username" required>
          </div>
          <div class="input-group">
            <span><i class="bi bi-hash"></i></span>
            <input type="text" name="instructor_id" placeholder="Instructor ID" required>
          </div>
          <div class="input-group">
            <span><i class="bi bi-envelope-fill"></i></span>
            <input type="email" name="email" placeholder="Email Address" required>
          </div>
          <div class="input-group">
            <span><i class="bi bi-person-circle"></i></span>
            <input type="text" name="first_name" placeholder="First Name" required>
          </div>
          <div class="input-group">
            <span><i class="bi bi-person-badge"></i></span>
            <input type="text" name="last_name" placeholder="Last Name" required>
          </div>
          <div class="input-group">
            <span><i class="bi bi-person"></i></span>
            <input type="text" name="middle_name" placeholder="Middle Name (Optional)">
          </div>
          <div class="input-group">
            <span><i class="bi bi-building"></i></span>
            <input type="text" name="department" placeholder="Department" required>
          </div>
          <div class="input-group">
            <span><i class="bi bi-shield-lock-fill"></i></span>
            <input type="password" name="password1" placeholder="4-Digit Password" required minlength="4" maxlength="4">
          </div>
          <div class="input-group">
            <span><i class="bi bi-shield-check"></i></span>
            <input type="password" name="password2" placeholder="Confirm Password" required minlength="4" maxlength="4">
          </div>
          <button type="submit" name="register_submit" class="btn-accent">Register</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  const loginTab = document.getElementById('loginTab');
  const registerTab = document.getElementById('registerTab');
  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');

  // Show correct tab based on errors/messages
  {% if register_form.errors %}
    registerTab.classList.add('active');
    loginTab.classList.remove('active');
    registerForm.classList.add('active');
    loginForm.classList.remove('active');
  {% else %}
    loginTab.classList.add('active');
    registerTab.classList.remove('active');
    loginForm.classList.add('active');
    registerForm.classList.remove('active');
  {% endif %}

  loginTab.addEventListener('click', () => {
    loginTab.classList.add('active');
    registerTab.classList.remove('active');
    loginForm.classList.add('active');
    registerForm.classList.remove('active');
  });
  
  registerTab.addEventListener('click', () => {
    registerTab.classList.add('active');
    loginTab.classList.remove('active');
    registerForm.classList.add('active');
    loginForm.classList.remove('active');
  });
</script>
</body>
</html>